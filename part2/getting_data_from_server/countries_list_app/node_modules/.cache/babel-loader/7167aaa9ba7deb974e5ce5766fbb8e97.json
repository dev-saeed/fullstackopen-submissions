{"ast":null,"code":"import _slicedToArray from \"/home/saeed/Desktop/fullstackopen-submissions/part2/getting_data_from_server/countries_list_app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";\nvar _jsxFileName = \"/home/saeed/Desktop/fullstackopen-submissions/part2/getting_data_from_server/countries_list_app/src/App.js\";\nimport React, { useState, useEffect } from \"react\";\nimport Axios from \"axios\";\n\nconst Filter = ({\n  persons,\n  setPersons,\n  setCity,\n  setSearch\n}) => {\n  const handleSearch = ev => {\n    let search = ev.target.value.trim().toLowerCase();\n    setSearch(search);\n    let searchedpersons = persons.filter(asset => asset.name.toLowerCase().indexOf(ev.target.value) !== -1);\n\n    if (searchedpersons.length === 1) {\n      const Api_Key = '8d2de98e089f1c28e1a22fc19a24ef04';\n      Axios.get(\"https://api.openweathermap.org/data/2.5/weather?q=\".concat(searchedpersons[0].capital, \"&appid=\").concat(Api_Key, \"&units=metric\")).then(resp => {\n        console.log(resp.data);\n        setCity(resp.data);\n      });\n    }\n  };\n\n  return React.createElement(\"input\", {\n    onChange: handleSearch,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 18\n    },\n    __self: this\n  });\n};\n\nconst Persons = ({\n  persons,\n  setPersons,\n  detail,\n  setDetail,\n  search\n}) => {\n  const handleCountries = (v, i) => {\n    console.log(v, i);\n    let detail = {\n      show: true,\n      index: i\n    };\n    setDetail(detail);\n  };\n\n  const filtered_Countries = persons.filter(person => {\n    return person.name.trim().toLowerCase().match(search);\n  });\n  return React.createElement(\"div\", {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 36\n    },\n    __self: this\n  }, search.length > 0 ? filtered_Countries.length === 1 ? filtered_Countries.map((v, i) => {\n    return React.createElement(\"div\", {\n      key: i,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 39\n      },\n      __self: this\n    }, React.createElement(\"h2\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 39\n      },\n      __self: this\n    }, v.name), React.createElement(\"div\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 39\n      },\n      __self: this\n    }, React.createElement(\"div\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 40\n      },\n      __self: this\n    }, \"capital : \", v.capital), React.createElement(\"div\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 40\n      },\n      __self: this\n    }, \"population : \", v.population), React.createElement(\"h2\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 41\n      },\n      __self: this\n    }, \"languages :\"), React.createElement(\"ul\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 42\n      },\n      __self: this\n    }, v.languages.map((v, i) => React.createElement(\"li\", {\n      key: i,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 42\n      },\n      __self: this\n    }, v.name))), v.flag && React.createElement(\"img\", {\n      width: \"160px\",\n      height: \"100px\",\n      alt: \"country flag\",\n      src: v.flag,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 43\n      },\n      __self: this\n    })));\n  }) : filtered_Countries.length < 10 ? filtered_Countries.map((v, i) => React.createElement(\"div\", {\n    key: i,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 47\n    },\n    __self: this\n  }, v.name, detail.show && detail.index == i && React.createElement(\"div\", {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 47\n    },\n    __self: this\n  }, v.capital), React.createElement(\"button\", {\n    onClick: () => handleCountries(v, i),\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 47\n    },\n    __self: this\n  }, \"Show\"))) : React.createElement(\"div\", {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 48\n    },\n    __self: this\n  }, \"Too many filters, specify another filter\") : persons.map((v, i) => {\n    return React.createElement(\"div\", {\n      key: i,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 51\n      },\n      __self: this\n    }, v.name);\n  }));\n};\n\nconst App = () => {\n  const _useState = useState([]),\n        _useState2 = _slicedToArray(_useState, 2),\n        persons = _useState2[0],\n        setPersons = _useState2[1];\n\n  const _useState3 = useState([]),\n        _useState4 = _slicedToArray(_useState3, 2),\n        city = _useState4[0],\n        setCity = _useState4[1];\n\n  const _useState5 = useState(false),\n        _useState6 = _slicedToArray(_useState5, 2),\n        detail = _useState6[0],\n        setDetail = _useState6[1];\n\n  const _useState7 = useState(\"\"),\n        _useState8 = _slicedToArray(_useState7, 2),\n        search = _useState8[0],\n        setSearch = _useState8[1];\n\n  const hook = () => {\n    Axios.get('https://restcountries.eu/rest/v2/all').then(response => {\n      setPersons(response.data);\n      setCity(response.data[0].city);\n    });\n  };\n\n  useEffect(hook, []);\n  return React.createElement(\"div\", {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 75\n    },\n    __self: this\n  }, React.createElement(\"h2\", {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 76\n    },\n    __self: this\n  }, \"find countries\"), React.createElement(\"div\", {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 77\n    },\n    __self: this\n  }, \"filter shown with \", React.createElement(Filter, {\n    persons: persons,\n    setSearch: setSearch,\n    setPersons: setPersons,\n    setCity: setCity,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 78\n    },\n    __self: this\n  })), React.createElement(\"div\", {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 80\n    },\n    __self: this\n  }, React.createElement(Persons, {\n    persons: persons,\n    setPersons: setPersons,\n    search: search,\n    detail: detail,\n    setDetail: setDetail,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 81\n    },\n    __self: this\n  }), city && city.length === 1 ? React.createElement(\"div\", {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 82\n    },\n    __self: this\n  }, React.createElement(\"h2\", {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 82\n    },\n    __self: this\n  }, \"weather in \", city.name), React.createElement(\"div\", {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 82\n    },\n    __self: this\n  }, \"temperature : \", city.main.temp, \" C \"), React.createElement(\"div\", {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 82\n    },\n    __self: this\n  }, \"wind : \", city.wind.speed, \" kph\")) : null));\n};\n\nexport default App;","map":{"version":3,"sources":["/home/saeed/Desktop/fullstackopen-submissions/part2/getting_data_from_server/countries_list_app/src/App.js"],"names":["React","useState","useEffect","Axios","Filter","persons","setPersons","setCity","setSearch","handleSearch","ev","search","target","value","trim","toLowerCase","searchedpersons","filter","asset","name","indexOf","length","Api_Key","get","capital","then","resp","console","log","data","Persons","detail","setDetail","handleCountries","v","i","show","index","filtered_Countries","person","match","map","population","languages","flag","App","city","hook","response","main","temp","wind","speed"],"mappings":"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","sourcesContent":["import React, { useState, useEffect } from \"react\";\nimport Axios from \"axios\";\n\nconst Filter = ({persons,setPersons,setCity,setSearch}) => {\n  const handleSearch = ev => {\n    let search = ev.target.value.trim().toLowerCase();\n    setSearch(search);\n    let searchedpersons = persons.filter((asset) => asset.name.toLowerCase().indexOf(ev.target.value) !== -1);\n    if(searchedpersons.length === 1) {\n      const Api_Key = '8d2de98e089f1c28e1a22fc19a24ef04';\n      Axios.get(`https://api.openweathermap.org/data/2.5/weather?q=${searchedpersons[0].capital}&appid=${Api_Key}&units=metric`).then(resp => {\n        console.log(resp.data)\n        setCity(resp.data)\n      })\n    }\n};\n  return (\n    <input onChange={handleSearch} />\n  )\n}\n\nconst Persons = ({ persons, setPersons,detail,setDetail,search }) => {\n\n  const handleCountries = (v,i) => {\n    console.log(v,i)\n    let detail = { show : true, index : i };\n    setDetail(detail);\n\n  }\n\n  const filtered_Countries = persons.filter((person) => { \n    return person.name.trim().toLowerCase().match(search)\n  });\n \n  return (\n    <div>{search.length > 0 ?\n      filtered_Countries.length === 1 ? \n      filtered_Countries.map((v, i) => {\n        return <div key={i}><h2>{v.name}</h2><div>\n       <div>capital : {v.capital}</div><div>population : {v.population}</div>\n       <h2>languages :</h2>\n       <ul>{v.languages.map((v,i)=> <li key={i}>{v.name}</li> )}</ul>\n      {v.flag && <img width=\"160px\" height=\"100px\" alt=\"country flag\" src={v.flag}/>}</div>\n       </div>;\n       }) \n      :\n      filtered_Countries.length < 10 ? filtered_Countries.map((v,i) => <div key={i}>{v.name}{detail.show && (detail.index==i) && <div>{v.capital}</div>}<button onClick={() => handleCountries(v,i)}>Show</button></div>) : \n      <div>Too many filters, specify another filter</div>\n      :\n      persons.map((v, i) => {\n       return <div key={i}>{v.name}</div>;\n      })\n    }</div>\n  )\n}\n\nconst App = () => {\n  const [persons, setPersons] = useState([]);\n  const [city, setCity] = useState([]);\n  const [detail,setDetail] = useState(false);\n  const [search, setSearch] = useState(\"\");\n\n  const hook = () => {\n    Axios\n      .get('https://restcountries.eu/rest/v2/all')\n      .then(response => {\n        setPersons(response.data)\n        setCity(response.data[0].city)\n      })\n  }\n\n  useEffect(hook, [])\n\n  return (\n    <div>\n      <h2>find countries</h2>\n      <div>\n        filter shown with <Filter persons={persons} setSearch={setSearch} setPersons={setPersons} setCity={setCity} />\n      </div>\n      <div>\n      <Persons persons={persons} setPersons={setPersons} search={search} detail={detail} setDetail={setDetail}/>\n      {(city && city.length === 1) ? <div><h2>weather in {city.name}</h2><div>temperature : {city.main.temp} C </div><div>wind : {city.wind.speed} kph</div></div>:null}\n      </div>\n    </div>\n  );\n};\n\nexport default App;\n"]},"metadata":{},"sourceType":"module"}