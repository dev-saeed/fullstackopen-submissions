{"ast":null,"code":"import _slicedToArray from \"/home/saeed/Desktop/fullstackopen/part2/getting_data_from_server/countries-list-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";\nimport _defineProperty from \"/home/saeed/Desktop/fullstackopen/part2/getting_data_from_server/countries-list-app/node_modules/@babel/runtime/helpers/esm/defineProperty\";\nvar _jsxFileName = \"/home/saeed/Desktop/fullstackopen/part2/getting_data_from_server/countries-list-app/src/App.js\";\n\nfunction ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); if (enumerableOnly) symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; }); keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys(source, true).forEach(function (key) { _defineProperty(target, key, source[key]); }); } else if (Object.getOwnPropertyDescriptors) { Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)); } else { ownKeys(source).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } } return target; }\n\nimport React, { useState, useEffect } from \"react\";\nimport Axios from \"axios\";\n\nconst Filter = ({\n  persons,\n  setPersons,\n  setCity\n}) => {\n  const handleSearch = ev => {\n    let searchedpersons = persons.filter(asset => asset.name.toLowerCase().indexOf(ev.target.value) !== -1);\n\n    if (searchedpersons.length === 1) {\n      const Api_Key = '8d2de98e089f1c28e1a22fc19a24ef04';\n      Axios.get(\"https://api.openweathermap.org/data/2.5/weather?q=\".concat(searchedpersons[0].capital, \"&appid=\").concat(Api_Key, \"&units=metric\")).then(resp => {\n        console.log(resp.data);\n        setCity(resp.data);\n      });\n    }\n\n    setPersons(searchedpersons);\n\n    if (!ev.target.value) {\n      setPersons(persons);\n    }\n  };\n\n  return React.createElement(\"input\", {\n    onChange: handleSearch,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 21\n    },\n    __self: this\n  });\n};\n\nconst Persons = ({\n  persons,\n  setPersons,\n  detail,\n  setDetail\n}) => {\n  const handleCountries = v => {\n    let selected_person = persons.map(list => {\n      if (list.name === v.name) {\n        return list;\n      } else return null;\n    });\n\n    let person = _objectSpread({}, persons, {\n      selected_person\n    });\n\n    console.log(person);\n    setPersons(person);\n    console.log('Run');\n    let detail = true;\n    setDetail(detail);\n  };\n\n  return React.createElement(\"div\", {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 46\n    },\n    __self: this\n  }, persons.length === 1 ? persons.map((v, i) => {\n    return React.createElement(\"div\", {\n      key: i,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 48\n      },\n      __self: this\n    }, React.createElement(\"h2\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 48\n      },\n      __self: this\n    }, v.name), \" \", React.createElement(\"div\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 48\n      },\n      __self: this\n    }, \"capital \", v.capital), \" \", React.createElement(\"div\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 48\n      },\n      __self: this\n    }, \"population \", v.population), React.createElement(\"h3\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 48\n      },\n      __self: this\n    }, \"languages\"), React.createElement(\"ul\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 48\n      },\n      __self: this\n    }, \" \", v.languages.map((v, i) => {\n      return React.createElement(\"li\", {\n        key: i,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 49\n        },\n        __self: this\n      }, v.name);\n    })), React.createElement(\"img\", {\n      width: \"160px\",\n      height: \"100px\",\n      alt: \"country flag\",\n      src: v.flag,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 50\n      },\n      __self: this\n    }));\n  }) : persons.map((v, i) => {\n    return React.createElement(\"div\", {\n      key: i,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 52\n      },\n      __self: this\n    }, v.name, \" \", React.createElement(\"button\", {\n      onClick: () => handleCountries(v),\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 52\n      },\n      __self: this\n    }, \"Show more\"));\n  }));\n};\n\nconst App = () => {\n  const _useState = useState([]),\n        _useState2 = _slicedToArray(_useState, 2),\n        persons = _useState2[0],\n        setPersons = _useState2[1];\n\n  const _useState3 = useState([]),\n        _useState4 = _slicedToArray(_useState3, 2),\n        city = _useState4[0],\n        setCity = _useState4[1];\n\n  const _useState5 = useState(false),\n        _useState6 = _slicedToArray(_useState5, 2),\n        detail = _useState6[0],\n        setDetail = _useState6[1];\n\n  const hook = () => {\n    Axios.get('https://restcountries.eu/rest/v2/all').then(response => {\n      setPersons(response.data);\n      setCity(response.data[0].city);\n    });\n  };\n\n  useEffect(hook, []);\n  return React.createElement(\"div\", {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 77\n    },\n    __self: this\n  }, React.createElement(\"h2\", {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 78\n    },\n    __self: this\n  }, \"find countries\"), React.createElement(\"div\", {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 79\n    },\n    __self: this\n  }, \"filter shown with \", React.createElement(Filter, {\n    persons: persons,\n    setPersons: setPersons,\n    setCity: setCity,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 80\n    },\n    __self: this\n  })), React.createElement(\"h2\", {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 82\n    },\n    __self: this\n  }, \"Numbers\"), persons.length >= 10 ? 'Too many matches, specify another filter' : React.createElement(\"div\", {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 84\n    },\n    __self: this\n  }, React.createElement(Persons, {\n    persons: persons,\n    setPersons: setPersons,\n    detail: detail,\n    setDetail: setDetail,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 85\n    },\n    __self: this\n  }), persons.length === 1 && city && React.createElement(\"div\", {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 86\n    },\n    __self: this\n  }, React.createElement(\"h2\", {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 86\n    },\n    __self: this\n  }, \"weather in \", city.name), React.createElement(\"div\", {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 86\n    },\n    __self: this\n  }, \"temperature : \", city.main.temp, \" C \"), React.createElement(\"div\", {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 86\n    },\n    __self: this\n  }, \"wind : \", city.wind.speed, \" kph\"))));\n};\n\nexport default App;","map":{"version":3,"sources":["/home/saeed/Desktop/fullstackopen/part2/getting_data_from_server/countries-list-app/src/App.js"],"names":["React","useState","useEffect","Axios","Filter","persons","setPersons","setCity","handleSearch","ev","searchedpersons","filter","asset","name","toLowerCase","indexOf","target","value","length","Api_Key","get","capital","then","resp","console","log","data","Persons","detail","setDetail","handleCountries","v","selected_person","map","list","person","i","population","languages","flag","App","city","hook","response","main","temp","wind","speed"],"mappings":"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","sourcesContent":["import React, { useState, useEffect } from \"react\";\nimport Axios from \"axios\";\n\nconst Filter = ({persons,setPersons,setCity}) => {\n  const handleSearch = ev => {\n    let searchedpersons = persons.filter((asset) => asset.name.toLowerCase().indexOf(ev.target.value) !== -1);\n    if(searchedpersons.length === 1) {\n      const Api_Key = '8d2de98e089f1c28e1a22fc19a24ef04';\n      Axios.get(`https://api.openweathermap.org/data/2.5/weather?q=${searchedpersons[0].capital}&appid=${Api_Key}&units=metric`).then(resp => {\n        console.log(resp.data)\n        setCity(resp.data)\n      })\n    }\n    setPersons(searchedpersons);\n   \n    if(!ev.target.value) {\n      setPersons(persons)\n    }\n};\n  return (\n    <input onChange={handleSearch} />\n  )\n}\n\nconst Persons = ({ persons, setPersons,detail,setDetail }) => {\n  const handleCountries = (v) => {\n    let selected_person = persons.map((list) => { \n     if(list.name === v.name) {\n       return list\n     }\n     else return null;\n    })\n    let person = {\n      ...persons,\n      selected_person\n    }\n    console.log(person)\n    setPersons(person)\n    console.log('Run')\n    let detail = true;\n    setDetail(detail);\n  \n  }\n\n  return (\n    <div>{persons.length === 1 ?\n      persons.map((v, i) => {\n      return <div key={i}><h2>{v.name}</h2> <div>capital {v.capital}</div> <div>population {v.population}</div><h3>languages</h3><ul> {v.languages.map((v,i)=>{\n        return <li key={i}>{v.name}</li>\n      })}</ul><img width=\"160px\" height=\"100px\" alt=\"country flag\" src={v.flag}/></div>;\n    }) :  persons.map((v, i) => {\n    return <div key={i}>{v.name} <button onClick={() => handleCountries(v)}>Show more</button></div>;\n    })\n    }\n    </div>\n  )\n}\n\nconst App = () => {\n  const [persons, setPersons] = useState([]);\n  const [city, setCity] = useState([]);\n  const [detail,setDetail] = useState(false);\n\n  const hook = () => {\n    Axios\n      .get('https://restcountries.eu/rest/v2/all')\n      .then(response => {\n \n        setPersons(response.data)\n        setCity(response.data[0].city)\n      })\n  }\n\n  useEffect(hook, [])\n\n  return (\n    <div>\n      <h2>find countries</h2>\n      <div>\n        filter shown with <Filter persons={persons} setPersons={setPersons} setCity={setCity} />\n      </div>\n      <h2>Numbers</h2>\n       {persons.length >= 10 ? 'Too many matches, specify another filter':\n      <div>\n      <Persons persons={persons} setPersons={setPersons} detail={detail} setDetail={setDetail}/>\n      {persons.length === 1 && city && <div><h2>weather in {city.name}</h2><div>temperature : {city.main.temp} C </div><div>wind : {city.wind.speed} kph</div></div>}\n      </div>}\n    </div>\n  );\n};\n\nexport default App;\n"]},"metadata":{},"sourceType":"module"}